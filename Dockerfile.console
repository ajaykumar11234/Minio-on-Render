FROM nginx:alpine

# Default PORT for local testing (Render sets its own)
ENV PORT=10000

# Copy config template
COPY nginx.conf /etc/nginx/templates/default.conf.template

EXPOSE 10000

# Substitute $PORT dynamically and start NGINX
CMD ["sh", "-c", "envsubst '$PORT' < /etc/nginx/templates/default.conf.template > /etc/nginx/conf.d/default.conf && nginx -g 'daemon off;'"]
