FROM nginx:alpine

# Copy template for dynamic port substitution
COPY nginx.conf /etc/nginx/templates/default.conf.template

EXPOSE 8080  # optional, Render sets its own $PORT

# Substitute $PORT at runtime and start NGINX
CMD sh -c 'envsubst "$PORT" < /etc/nginx/templates/default.conf.template > /etc/nginx/conf.d/default.conf && nginx -g "daemon off;"'
